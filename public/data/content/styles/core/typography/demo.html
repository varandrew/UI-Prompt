<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kinetic Typography Experience</title>
    <!-- 引入 Google Fonts: Syncopate (未来感标题) 和 Space Mono (科技感正文) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Syncopate:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="demo.css">
</head>
<body>

    <div class="grid-bg"></div>

    <div class="stage-container float-anim" id="stage">
        <!-- 角落标记 -->
        <div class="corner tl"></div>
        <div class="corner tr"></div>
        <div class="corner bl"></div>
        <div class="corner br"></div>

        <!-- 装饰性数据 -->
        <div class="counter-box counter-top">
            SYS.OP: <span id="counter1">000</span><br>
            FPS: <span id="fps">60</span>
        </div>
        <div class="counter-box counter-bottom">
            DATA_STREAM<br>
            <span id="counter2">4892</span> KB
        </div>

        <!-- 核心排版 -->
        <div class="typography-art">
            <div class="line-1">KINETIC</div>
            <div class="line-2" id="split-text">TYPOGRAPHY</div>
            <div class="line-3">DESIGN SYSTEM</div>
        </div>

        <!-- 打字机效果 -->
        <div class="typewriter-container">
            <span class="typewriter-text" id="typewriter"></span><span class="cursor"></span>
        </div>

        <!-- 交互按钮 -->
        <button class="action-btn" onclick="triggerPulse()">Initiate</button>
    </div>

    <script>
        // 1. 字符级联动拆分 (Splitting Text)
        const target = document.getElementById('split-text');
        const text = target.innerText;
        target.innerHTML = '';
        
        // 将每个字母包裹在 span 中，并添加动画延迟索引
        text.split('').forEach((char, index) => {
            const span = document.createElement('span');
            span.innerText = char;
            span.className = 'char';
            span.style.animationDelay = `${index * 0.05}s`; // 简单的波浪延迟基础
            target.appendChild(span);
        });

        // 2. 打字机效果 (Typewriter Effect)
        const messages = [
            "VISUALIZING DATA STREAMS...",
            "RENDERING KINETIC ASSETS...",
            "TEXT IS THE NEW IMAGE.",
            "BREAKING STATIC BOUNDARIES."
        ];
        const typeTarget = document.getElementById('typewriter');
        let msgIndex = 0;
        let charIndex = 0;
        let isDeleting = false;

        function type() {
            const currentMsg = messages[msgIndex];
            
            if (isDeleting) {
                typeTarget.innerText = currentMsg.substring(0, charIndex - 1);
                charIndex--;
            } else {
                typeTarget.innerText = currentMsg.substring(0, charIndex + 1);
                charIndex++;
            }

            let typeSpeed = isDeleting ? 30 : 80;

            if (!isDeleting && charIndex === currentMsg.length) {
                isDeleting = true;
                typeSpeed = 2000; // 停顿时间
            } else if (isDeleting && charIndex === 0) {
                isDeleting = false;
                msgIndex = (msgIndex + 1) % messages.length;
                typeSpeed = 500;
            }

            setTimeout(type, typeSpeed);
        }
        
        // 启动打字机
        setTimeout(type, 1000);

        // 3. 数字计数器模拟 (Counters)
        function animateCounter(id, start, end, duration) {
            const obj = document.getElementById(id);
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start).toString().padStart(3, '0');
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                } else {
                    // 循环动画
                    setTimeout(() => animateCounter(id, start, end, duration), 2000);
                }
            };
            window.requestAnimationFrame(step);
        }

        animateCounter('counter1', 100, 999, 2000);
        
        // 随机更新 FPS 增加真实感
        setInterval(() => {
            document.getElementById('fps').innerText = Math.floor(55 + Math.random() * 10);
            document.getElementById('counter2').innerText = Math.floor(4000 + Math.random() * 2000);
        }, 500);


        // 4. 按钮脉冲反馈 (Pulse Trigger)
        function triggerPulse() {
            const stage = document.getElementById('stage');
            
            // 简单的震动/脉冲动画类
            stage.style.transform = "scale(0.95)";
            stage.style.borderColor = "#fff";
            
            setTimeout(() => {
                stage.style.transform = "scale(1.02)";
            }, 100);
            
            setTimeout(() => {
                stage.style.transform = ""; // 恢复 CSS 定义的 hover 状态或默认状态
                stage.style.borderColor = "rgba(255, 255, 255, 0.1)";
            }, 300);

            // 触发所有字母的随机颜色变换一次
            const chars = document.querySelectorAll('.char');
            chars.forEach(c => {
                c.style.color = '#fff';
                c.style.textShadow = '0 0 20px white';
                setTimeout(() => {
                    c.style.color = 'transparent';
                    c.style.textShadow = 'none';
                }, 200);
            });
        }

        // 5. 3D 倾斜效果 (鼠标移动视差)
        document.addEventListener('mousemove', (e) => {
            const stage = document.getElementById('stage');
            const x = (window.innerWidth / 2 - e.pageX) / 25;
            const y = (window.innerHeight / 2 - e.pageY) / 25;
            
            // 只有当鼠标不在舞台上 hover 时应用全局微动，避免冲突
            // 这里我们应用一个非常轻微的全局倾斜
            stage.style.transform = `rotateY(${x * -0.5}deg) rotateX(${y * 0.5}deg)`;
        });

    </script>
</body>
</html>