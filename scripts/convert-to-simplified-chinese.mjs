import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __dirname = path.dirname(fileURLToPath(import.meta.url));

// Mapping of Traditional Chinese to Simplified Chinese
const TRADITIONAL_TO_SIMPLIFIED = {
  'è¨­': 'è®¾', 'é¢¨': 'é£', 'é¢¨æ ¼': 'é£æ ¼', 'æ¡': 'é‡‡', 'ç‰¹': 'ç‰¹', 'å¼·': 'å¼º', 'èª¿': 'è°ƒ',
  'è³ª': 'è´¨', 'è³ªæ„Ÿ': 'è´¨æ„Ÿ', 'è©³': 'è¯¦', 'ç´°': 'ç»†', 'ç·š': 'çº¿', 'ç·šæ¢': 'çº¿æ¡',
  'æ‡‰': 'åº”', 'æ‡‰ç”¨': 'åº”ç”¨', 'å ´': 'åœº', 'å ´æ™¯': 'åœºæ™¯', 'æ§‹': 'æ„', 'æ§‹åœ–': 'æ„å›¾',
  'å‰µ': 'åˆ›', 'å‰µæ„': 'åˆ›æ„', 'å‰µæ–°': 'åˆ›æ–°', 'å‰µé€ ': 'åˆ›é€ ', 'é»': 'ç‚¹', 'é»é™£': 'ç‚¹é˜µ',
  'ç¶“': 'ç»', 'ç¶“å…¸': 'ç»å…¸', 'å­¸': 'å­¦', 'å­¸æ´¾': 'å­¦æ´¾', 'è¼ƒ': 'è¾ƒ', 'è¼ƒç‚º': 'è¾ƒä¸º',
  'å°': 'å¯¹', 'å°æ¯”': 'å¯¹æ¯”', 'å°ç¨±': 'å¯¹ç§°', 'å±¤': 'å±‚', 'å±¤æ¬¡': 'å±‚æ¬¡', 'å±¤ç´š': 'çº§',
  'ç´š': 'çº§', 'çµ„': 'ç»„', 'çµ„æˆ': 'ç»„æˆ', 'æ¥µ': 'æ', 'æ¥µç°¡': 'æç®€', 'ç°¡': 'ç®€',
  'ç°¡æ½”': 'ç®€æ´', 'é«”': 'ä½“', 'é«”é©—': 'ä½“éªŒ', 'è¦–': 'è§†', 'è¦–è¦º': 'è§†è§‰', 'è¦–è¦ºé«”é©—': 'è§†è§‰ä½“éªŒ',
  'è¦½': 'è§ˆ', 'ç¾': 'ç°', 'ç¾ä»£': 'ç°ä»£', 'ç¾å¯¦': 'ç°å®', 'å¯¦': 'å®', 'å¯¦æ„Ÿ': 'å®æ„Ÿ',
  'å±¬': 'å±', 'å±¬æ–¼': 'å±äº', 'èˆ‡': 'ä¸', 'èˆ‡çœ¾': 'ä¸ä¼—', 'è³ª': 'è´¨', 'è³ªé‡': 'è´¨é‡',
  'é”': 'è¾¾', 'é”åˆ°': 'è¾¾åˆ°', 'é¡': 'é¢œ', 'é¡è‰²': 'é¢œè‰²', 'é£¾': 'é¥°', 'é£¾å“': 'é¥°å“',
  'éŠ€': 'é“¶', 'éŠ…': 'é“œ', 'éŠ…è£½': 'é“œåˆ¶', 'é‘«': 'é‘«', 'é™°': 'é˜´', 'é™°å½±': 'é˜´å½±',
  'é™¸': 'é™†', 'é™½': 'é˜³', 'é™½å…‰': 'é˜³å…‰', 'é›²': 'äº‘', 'é›»': 'ç”µ', 'é›»è…¦': 'ç”µè„‘',
  'éˆ': 'çµ', 'éˆæ´»': 'çµæ´»', 'éˆæ„Ÿ': 'çµæ„Ÿ', 'é »': 'é¢‘', 'é¡': 'é¢', 'é¡å¤–': 'é¢å¤–',
  'é¡': 'ç±»', 'é¡å‹': 'ç±»å‹', 'é¡¯': 'æ˜¾', 'é¡¯ç¤º': 'æ˜¾ç¤º', 'é¡˜': 'æ„¿', 'é¡˜æ™¯': 'æ„¿æ™¯',
  'æ¨™': 'æ ‡', 'æ¨™ç±¤': 'æ ‡ç­¾', 'æ¨™é¡Œ': 'æ ‡é¢˜', 'æ¨™æº–': 'æ ‡å‡†', 'æ¨™èªŒ': 'æ ‡å¿—',
  'è£½': 'åˆ¶', 'è£½ä½œ': 'åˆ¶ä½œ', 'è£½é€ ': 'åˆ¶é€ ', 'è£¡': 'é‡Œ', 'è¥¯': 'è¡¬', 'è¥¯ç·š': 'è¡¬çº¿',
  'è¨ˆ': 'è®¡', 'è¨ˆç•«': 'è®¡åˆ’', 'è¨ˆç®—': 'è®¡ç®—', 'è¨Š': 'è®¯', 'è¨Šæ¯': 'è®¯æ¯', 'è¨': 'è®¨',
  'è©²': 'è¯¥', 'èª': 'è¯­', 'èªè¨€': 'è¯­è¨€', 'èª¤': 'è¯¯', 'èªª': 'è¯´', 'è«‹': 'è¯·',
  'è«‹æ±‚': 'è¯·æ±‚', 'èª˜': 'è¯±', 'èª˜å°': 'è¯±å¯¼', 'è«–': 'è®º', 'è­‰': 'è¯', 'è­‰å¯¦': 'è¯å®',
  'èª ': 'è¯š', 'èª°': 'è°', 'èª¿': 'è°ƒ', 'èª¿æ•´': 'è°ƒæ•´', 'èª¿æŸ¥': 'è°ƒæŸ¥', 'è«‡': 'è°ˆ',
  'è«‡è«–': 'è°ˆè®º', 'èª²': 'è¯¾', 'èª²é¡Œ': 'è¯¾é¢˜', 'è«¸': 'è¯¸', 'è«¸å¤š': 'è¯¸å¤š', 'è«‡': 'è°ˆ',
  'è¬‚': 'è°“', 'è¬': 'è°¢', 'è­¯': 'è¯‘', 'è­œ': 'è°±', 'è±': 'ä¸°', 'è±å¯Œ': 'ä¸°å¯Œ',
  'è©¦': 'è¯•', 'è©¦åœ–': 'è¯•å›¾', 'è²¨': 'è´§', 'è²©': 'è´©', 'è²»': 'è´¹', 'è²»ç”¨': 'è´¹ç”¨',
  'è³ª': 'è´¨', 'è³ªæ„Ÿ': 'è´¨æ„Ÿ', 'è³¼': 'è´­', 'è³¼è²·': 'è´­ä¹°', 'è³£': 'å–', 'è³': 'èµ',
  'è³‡': 'èµ„', 'è³‡æº': 'èµ„æº', 'è³¤': 'è´±', 'è³¦': 'èµ‹', 'è³¦äºˆ': 'èµ‹äºˆ', 'è³º': 'èµš',
  'è³ª': 'è´¨', 'è´': 'èµ¢', 'è´å®¶': 'èµ¢å®¶', 'è´å¾—': 'èµ¢å¾—', 'é«”': 'ä½“', 'é«”ç³»': 'ä½“ç³»',
  'é«”é©—': 'ä½“éªŒ', 'é«”ç¾': 'ä½“ç°', 'é«”è³ª': 'ä½“è´¨', 'é«”è‚²': 'ä½“è‚²', 'é«”å‹': 'ä½“å‹',
  'é«”æº«': 'ä½“æ¸©', 'é«”æª¢': 'ä½“æ£€', 'é«”åŠ›': 'ä½“åŠ›', 'é«”ç©': 'ä½“ç§¯', 'é«”è²¼': 'ä½“è´´',
  'é«”æ“': 'ä½“æ“', 'é«”æ…‹': 'ä½“æ€', 'é«”è«’': 'ä½“è°…', 'é«”é¢': 'ä½“é¢', 'é«”é©—': 'ä½“éªŒ',
  'è²': 'è²', 'è©•': 'è¯„', 'è©•åƒ¹': 'è¯„ä»·', 'è©•è«–': 'è¯„è®º', 'èª': 'è®¤', 'èªå¯': 'è®¤å¯',
  'èªè­˜': 'è®¤è¯†', 'èªç‚º': 'è®¤ä¸º', 'èª¤': 'è¯¯', 'èª¤æœƒ': 'è¯¯ä¼š', 'èªª': 'è¯´', 'èªªæ³•': 'è¯´æ³•',
  'èªªè©±': 'è¯´è¯', 'èª˜': 'è¯±', 'èª˜å°': 'è¯±å¯¼', 'èª²': 'è¯¾', 'èª²ç¨‹': 'è¯¾ç¨‹',
  'èª²é¡Œ': 'è¯¾é¢˜', 'èª²å ‚': 'è¯¾å ‚', 'è«¸': 'è¯¸', 'è«¸å¤š': 'è¯¸å¤š', 'è«‡': 'è°ˆ',
  'è«‡è«–': 'è°ˆè®º', 'è«‡è©±': 'è°ˆè¯', 'è«¾': 'è¯º', 'è¬‚': 'è°“', 'è¬': 'è°¢', 'è¬è¬': 'è°¢è°¢',
  'è¬›': 'è®²', 'è¬›è¿°': 'è®²è¿°', 'è¬›è©±': 'è®²è¯', 'è¬›è§£': 'è®²è§£', 'è¬›ç¾©': 'è®²ä¹‰',
  'è®€': 'è¯»', 'è®€æ›¸': 'è¯»ä¹¦', 'è®€å–': 'è¯»å–', 'è®€è€…': 'è¯»è€…', 'è®€éŸ³': 'è¯»éŸ³',
  'è­¯': 'è¯‘', 'è­¯è€…': 'è¯‘è€…', 'è­¯æ–‡': 'è¯‘æ–‡', 'è­”': 'æ’°', 'èª ': 'è¯š', 'èª å¯¦': 'è¯šå®',
  'èªŒ': 'å¿—', 'èªŒå‘': 'å¿—å‘', 'èª': 'è®¤', 'èªå¯': 'è®¤å¯', 'èªçœŸ': 'è®¤çœŸ',
  'èªè­˜': 'è®¤è¯†', 'èªç‚º': 'è®¤ä¸º', 'èªçŸ¥': 'è®¤çŸ¥', 'è©¦': 'è¯•', 'è©¦åœ–': 'è¯•å›¾',
  'è©¦é©—': 'è¯•éªŒ', 'è©¦ç”¨': 'è¯•ç”¨', 'è©¦è¡Œ': 'è¯•è¡Œ', 'è©¦ç®¡': 'è¯•ç®¡', 'è©¦é¡Œ': 'è¯•é¢˜',
  'è©¦è‘—': 'è¯•ç€', 'è©¦ç…‰': 'è¯•ç‚¼', 'è©¦æ¢': 'è¯•æ¢', 'è©¦è¡£é–“': 'è¯•è¡£é—´', 'è©¦èª¤': 'è¯•è¯¯',
  'è©': 'è¯', 'è©å½™': 'è¯æ±‡', 'è©å…¸': 'è¯å…¸', 'è©èª': 'è¯è¯­', 'è©åº': 'è¯åº',
  'è©©': 'è¯—', 'è©©äºº': 'è¯—äºº', 'è©©æ­Œ': 'è¯—æ­Œ', 'è©©é›†': 'è¯—é›†', 'è©©ç¯‡': 'è¯—ç¯‡',
  'è©©å¥': 'è¯—å¥', 'è©©æƒ…': 'è¯—æƒ…', 'è©©æ„': 'è¯—æ„', 'è©©é¢¨': 'è¯—é£', 'è©©é«”': 'è¯—ä½“',
  'è©': 'è©', 'è©': 'è¯ˆ', 'è©é¨™': 'è¯ˆéª—', 'è©’': 'è©’', 'è©”': 'è¯', 'è©–': 'è©–',
  'è©—': 'è©—', 'è©˜': 'è©˜', 'è©™': 'è©™', 'è©š': 'è©š', 'è©›': 'è¯…', 'è©œ': 'è©œ',
  'è©': 'è©', 'è©': 'è¯', 'è©£': 'è¯£', 'è©¤': 'è©¤', 'è©¥': 'è©¥', 'è©¦': 'è©¦',
  'è©§': 'è©§', 'è©¨': 'è©¨', 'è©©': 'è¯—', 'è©ª': 'è©ª', 'è©«': 'è¯¶', 'è©¬': 'è¯Ÿ',
  'è©­': 'è¯¡', 'è©®': 'è¯ ', 'è©¯': 'è©¯', 'è©°': 'è¯˜', 'è©±': 'è©±', 'è©²': 'è©²',
  'è©³': 'è¯¦', 'è©´': 'è©´', 'è©µ': 'è©µ', 'è©¶': 'è©¶', 'è©·': 'è©·', 'è©¸': 'è©¸',
  'è©¹': 'è©¹', 'è©º': 'è©º', 'è©»': 'è©»', 'è©¼': 'è¯™', 'è©½': 'è©½', 'è©¾': 'è©¾',
  'è©¿': 'è¯³', 'èª€': 'èª€', 'èª': 'èª', 'èª‚': 'èª‚', 'èªƒ': 'èªƒ', 'èª„': 'è¯”',
  'èª…': 'è¯›', 'èª†': 'è¯“', 'èª‡': 'å¤¸', 'èªˆ': 'èªˆ', 'èª‰': 'èª‰', 'èªŠ': 'èªŠ',
  'èª‹': 'èª‹', 'èªŒ': 'å¿—', 'èª': 'è®¤', 'èª': 'èª', 'èª': 'èª', 'èª': 'èª',
  'èª‘': 'è¯³', 'èª’': 'è¯¶', 'èª“': 'èª“', 'èª”': 'èª”', 'èª•': 'è¯', 'èª–': 'è¯–',
  'èª—': 'èª—', 'èª˜': 'è¯±', 'èª™': 'èª™', 'èªš': 'è¯®', 'èª›': 'è¯›', 'èªœ': 'èªœ',
  'èª': 'èª', 'èª': 'èª', 'èªŸ': 'èªŸ', 'èª ': 'è¯š', 'èª¡': 'è¯«', 'èª¢': 'èª¢',
  'èª£': 'è¯¬', 'èª¤': 'è¯¯', 'èª¥': 'è¯°', 'èª¦': 'è¯µ', 'èª§': 'èª§', 'èª¨': 'è¯²',
  'èª©': 'èª©', 'èªª': 'èªª', 'èª«': 'èª«', 'èª¬': 'èª¬', 'èª­': 'èª­', 'èª®': 'èª®',
  'èª¯': 'èª¯', 'èª°': 'è°', 'èª±': 'èª±', 'èª²': 'èª²', 'èª³': 'èª³', 'èª´': 'èª´',
  'èªµ': 'èªµ', 'èª¶': 'è¯¶', 'èª·': 'è¯¶', 'èª¸': 'èª¸', 'èª¹': 'è¯½', 'èªº': 'èªº',
  'èª»': 'èª»', 'èª¼': 'è°Š', 'èª½': 'èª½', 'èª¾': 'èª¾', 'èª¿': 'èª¿', 'è®€': 'è¯»',
  'è®': 'è®', 'è®‚': 'è®‚', 'è®ƒ': 'è®ƒ', 'è®„': 'è®„', 'è®…': 'è®…', 'è®†': 'è®†',
  'è®‡': 'è®‡', 'è®ˆ': 'è®ˆ', 'è®‰': 'è®‰', 'è¬›': 'è®²', 'è®‹': 'è®‹', 'è®Œ': 'è®Œ',
  'è®': 'è®', 'è®': 'è®', 'è®': 'è®', 'è¨': 'è®¯', 'è¨': 'è®¯', 'è¨‚': 'è®¢',
  'è¨‚åš': 'è®¢åš', 'è¨‚è³¼': 'è®¢è´­', 'è¨‚é–±': 'è®¢é˜…', 'è¨‚å©š': 'è®¢å©š', 'è¨‚æœ¬': 'è®¢æœ¬',
  'è¨ƒ': 'è®£', 'è¨„': 'è®„', 'è¨…': 'è®…', 'è¨†': 'è®†', 'è¨‡': 'è®‡', 'è¨ˆ': 'è®ˆ',
  'è¨‰': 'è®‰', 'è¨Š': 'è®¯', 'è¨Šæ¯': 'è®¯æ¯', 'è¨‹': 'è®‹', 'è¨Œ': 'è®Œ', 'è¨': 'è®',
  'è¨': 'è®', 'è¨': 'è®', 'è¨': 'è®', 'è¨‘': 'è®‘', 'è¨’': 'è®’', 'è¨“': 'è®­',
  'è¨”': 'è®”', 'è¨•': 'è®•', 'è¨–': 'è®–', 'è¨—': 'è®¬', 'è¨˜': 'è®˜', 'è¨™': 'è®™',
  'è¨š': 'è®š', 'è¨›': 'è®›', 'è¨œ': 'è®œ', 'è¨': 'è®', 'è¨': 'è®', 'è¨Ÿ': 'è®Ÿ',
  'è¨ ': 'è® ', 'è¨¡': 'è®¡', 'è¨¢': 'è®¢', 'è¨£': 'è®£', 'è¨¤': 'è®¤', 'è¨¥': 'è®¥',
  'è¨¦': 'è®¦', 'è¨§': 'è®§', 'è¨¨': 'è®¨', 'è¨©': 'è®©', 'è¨ª': 'è®¿', 'è¨«': 'è®«',
  'è¨¬': 'è®¬', 'è¨­': 'è®­', 'è¨®': 'è®®', 'è¨¯': 'è®¯', 'è¨°': 'è®°', 'è¨±': 'è®±',
  'è¨²': 'è®²', 'è¨³': 'è®³', 'è¨´': 'è®´', 'è¨µ': 'è®µ', 'è¨¶': 'è®¶', 'è¨·': 'è®·',
  'è¨¸': 'è®¸', 'è¨¹': 'è®¹', 'è¨º': 'è®º', 'è¨»': 'è®»', 'è¨¼': 'è®¼', 'è¨½': 'è®½',
  'è¨¾': 'è®¾', 'è¨¿': 'è®¿', 'èª€': 'è°€', 'èª': 'è°', 'èª‚': 'è°‚', 'èªƒ': 'è°ƒ',
  'èª„': 'è°„', 'èª…': 'è°…', 'èª†': 'è°†', 'èª‡': 'è°‡', 'èªˆ': 'è°ˆ', 'èª‰': 'è°‰',
  'èªŠ': 'è°Š', 'èª‹': 'è°‹', 'èªŒ': 'å¿—', 'èª': 'è°Œ', 'èª': 'è°', 'èª': 'è°',
  'èª': 'è°', 'èª‘': 'è°', 'èª’': 'è°‘', 'èª“': 'è°’', 'èª”': 'è°“', 'èª•': 'è°”',
  'èª–': 'è°•', 'èª—': 'è°–', 'èª˜': 'è°—', 'èª™': 'è°˜', 'èªš': 'è°™', 'èª›': 'è°š',
  'èªœ': 'è°›', 'èª': 'è°œ', 'èª': 'è°', 'èªŸ': 'è°', 'èª ': 'è°Ÿ', 'èª¡': 'è° ',
  'èª¢': 'è°¡', 'èª£': 'è°¢', 'èª¤': 'è°£', 'èª¥': 'è°¤', 'èª¦': 'è°¥', 'èª§': 'è°¦',
  'èª¨': 'è°§', 'èª©': 'è°¨', 'èªª': 'è°©', 'èª«': 'è°ª', 'èª¬': 'è°«', 'èª­': 'è°¬',
  'èª®': 'è°­', 'èª¯': 'è°®', 'èª°': 'è°¯', 'èª±': 'è°°', 'èª²': 'è°±', 'èª³': 'è°²',
  'èª´': 'è°³', 'èªµ': 'è°´', 'èª¶': 'è°µ', 'èª·': 'è°¶', 'èª¸': 'è°·', 'èª¹': 'è°¸',
  'èªº': 'è°¹', 'èª»': 'è°º', 'èª¼': 'è°»', 'èª½': 'è°¼', 'èª¾': 'è°½', 'èª¿': 'è°¾',
  'è®€': 'è°¿', 'è®': 'è±€', 'è®‚': 'è±', 'è®ƒ': 'è±‚', 'è®„': 'è±ƒ', 'è®…': 'è±„',
};

function convertToSimplified(text) {
  let result = text;

  // Replace traditional with simplified, longest first to avoid partial replacements
  const sortedPairs = Object.entries(TRADITIONAL_TO_SIMPLIFIED)
    .sort((a, b) => b[0].length - a[0].length);

  for (const [traditional, simplified] of sortedPairs) {
    result = result.replace(new RegExp(traditional, 'g'), simplified);
  }

  return result;
}

const stylesDir = path.join(__dirname, '../src/data/styles/generated');
let updated = 0;

function scanAndConvert(dir) {
  const entries = fs.readdirSync(dir);

  for (const entry of entries) {
    const fullPath = path.join(dir, entry);
    const stat = fs.statSync(fullPath);

    if (stat.isDirectory()) {
      scanAndConvert(fullPath);
    } else if (entry === 'manifest.json') {
      const content = JSON.parse(fs.readFileSync(fullPath, 'utf-8'));
      let zhDesc = content.family?.description?.['zh-CN'] || '';

      if (zhDesc) {
        const simplified = convertToSimplified(zhDesc);
        if (simplified !== zhDesc) {
          content.family.description['zh-CN'] = simplified;
          fs.writeFileSync(fullPath, JSON.stringify(content, null, 2) + '\n');
          updated++;
        }
      }
    }
  }
}

console.log('\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
console.log('ğŸŒ CONVERTING TO SIMPLIFIED CHINESE (ç®€ä½“ä¸­æ–‡)');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');

scanAndConvert(stylesDir);

console.log('âœ… Converted ' + updated + ' files to simplified Chinese');
console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');
